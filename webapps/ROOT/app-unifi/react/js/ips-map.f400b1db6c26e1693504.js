(window.webpackJsonpunifiNetworkUi=window.webpackJsonpunifiNetworkUi||[]).push([[9],{2442:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));var r=n(16),o=function(e,t){var n=t.successMessage,r=t.failureMessage;if((n||r)&&!e.createToast)throw new Error("formSubmit util requires createToast action as a prop. Please add it to mapDispatchToProps")},a=function(e){return function(t){return function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i,c){var s=c.props||t;o(s,a);var u=s.createToast,l="function"==typeof a?a(i):a,p=l.msgValues,f=l.successMessage,d=l.failureMessage;n(i,s,c).then((function(){return f&&u({icon:r.a.success,message:f,values:p}),e(c,t)})).catch((function(e){d&&u({icon:r.a.danger,message:d,values:p,errorMessage:e.msg,errorValues:e}),c.setSubmitting(!1)}))}}}},i=a((function(e){return e.setStatus({isSubmitted:!0})}))(),c=a((function(e){return e.setStatus({isSubmitted:!0})})),s=(a((function(e){return e.props.onClose()}))(),a((function(e,t){return t.onBack()})))},2700:function(e,t){},2710:function(e,t){},2871:function(e,t,n){"use strict";n.r(t);var r=n(20),o=n.n(r),a=n(35),i=n(3),c=n(5),s=n(36),u=n(1801),l=n(94),p=n(30),f=n(72),d=n(302),b=n(28),m=n(373),g=n(2442),v=n(352),y=n(387),h=n(149),O=n.n(h),C=n(109),k=n.n(C),R=n(233),E=n.n(R),j=n(883),S=n.n(j),w=n(134),_=n.n(w),P=n(150),I=n.n(P),x=n(138),D=n.n(x),U=n(151),A=n.n(U),q=n(152),L=n.n(q),N=n(102),M=n.n(N),T=n(426),B=n.n(T),F=n(0),V=n.n(F),G=n(1),H=n.n(G),K=n(126),z=n.n(K),Y=n(541),W=n(2),J=n(42),Q=n(14),X=n(10),Z=n(75);const $=i.a`
  margin-right: 8px;
`;var ee=({message:e,className:t,type:n="alert",values:r={},...o})=>{let a=X.a;return"info"===n&&(a=X.ab),V.a.createElement(Q.g,{className:t},V.a.createElement(a,{className:$,color:Z.k.yellow}),V.a.createElement(J.a,Object.assign({},o),V.a.createElement(W.c,{id:e,values:r})))},te=n(127),ne=n.n(te),re=n(2880),oe=n(2720),ae=n(2820),ie=n(2622),ce=n.n(ie),se=n(54),ue=n(2812),le=n.n(ue);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var o=M()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L()(this,n)}}var be=function(e){A()(n,e);var t=de(n);function n(){return _()(this,n),t.apply(this,arguments)}return I()(n,[{key:"getShaders",value:function(){return fe(fe({},le()(M()(n.prototype),"getShaders",this).call(this)),{},{inject:{"vs:#decl":"\n         uniform float coef;\n        ","vs:#main-end":"\n        if (coef > 0.0) {\n          vec4 pct = vec4(segmentRatio);\n          pct.a = step(coef, segmentRatio);\n          vec4 colorA = instanceSourceColors;\n          vec4 colorB = vec4(instanceTargetColors.r, instanceTargetColors.g, instanceTargetColors.b, 0.0);\n          vec4 color = mix(colorA, colorB, pct) / 255.;\n          vColor = color;\n        }\n                    ","fs:#main-start":"\n        if (vColor.a == 0.0) discard;\n                    "}})}},{key:"draw",value:function(e){var t=this.props.coef,r=fe(fe({},e.uniforms),{},{coef:t});le()(M()(n.prototype),"draw",this).call(this,fe(fe({},e),{},{uniforms:r}))}}]),n}(n(2887).a),me=n(525),ge=n(9),ve=n(106),ye=n(825),he=n(2814),Oe=n.n(he),Ce=n(502),ke=n(162),Re=Object(i.a)("padding:9px 31px;"),Ee=function(e){var t=e.disabled,n=e.onClickAction,r=e.blocked;return V.a.createElement(Ce.a,null,V.a.createElement(ke.c,{className:Re,disabled:t,name:r?"geoip-unblock-country":"geoip-block-country",size:"large",type:"button",variant:"primary",onClick:n},V.a.createElement(W.c,{id:r?"IPS_UNBLOCK_COUNTRY_LABEL":"IPS_BLOCK_COUNTRY_LABEL"})))};function je(e){var t=e.isUdm,n=e.values,r=e.blocked,o=e.onClickAction,a=t?150:15;return(n.blockedCountries||[]).length===a&&!r?V.a.createElement(W.c,{id:"IPS_GEOIP_FILTERING_WARNING_MESSAGE",values:{maxCountries:a}},(function(e){return V.a.createElement(Oe.a,{message:e},V.a.createElement(Ee,{blocked:r,disabled:!0,onClickAction:o}))})):V.a.createElement(Ee,{blocked:r,onClickAction:o})}Ee.propTypes={onClickAction:H.a.func.isRequired,blocked:H.a.bool.isRequired,disabled:H.a.bool},Ee.defaultProps={disabled:!1},je.propTypes={isUdm:H.a.bool.isRequired,values:H.a.object.isRequired,blocked:H.a.bool.isRequired,onClickAction:H.a.func.isRequired};var Se=Object(i.a)("cursor:pointer;"),we=Object(i.a)("margin-right:8px;"),_e=Object(i.a)("font-size:19px;font-weight:normal;font-family:Lato,sans-serif;"),Pe=Object(i.c)("div",{target:"e15sjzd80"})("display:",(function(e){return e.visible?"block":"none"}),";"),Ie=Object(i.c)("div",{target:"e15sjzd81"})("text-align:center;padding:20px 0;");function xe(e){var t=e.isUdm,n=e.values,r=e.closePopup,o=e.countryInfo,a=e.forwardedRef,i=e.visible,c=e.onClickAction,s=o&&o.code,u=!(!o||!o.blocked);return V.a.createElement(Pe,{innerRef:a,visible:i},o&&V.a.createElement(V.a.Fragment,null,V.a.createElement(ge.a,{justifyContent:"flex-end"},V.a.createElement(X.A,{onClick:r,className:Se})),V.a.createElement(ge.a,{alignItems:"center",className:"pt-2",justifyContent:"center"},V.a.createElement(ye.a,{countryCode:s,className:we}),V.a.createElement(ve.a,{className:_e},o.name)),V.a.createElement(Ie,null,V.a.createElement(je,{isUdm:t,values:n,blocked:u,onClickAction:c}))))}xe.propTypes={isUdm:H.a.bool.isRequired,values:H.a.object.isRequired,closePopup:H.a.func,countryInfo:H.a.shape({blocked:H.a.bool,code:H.a.string,name:H.a.string}),forwardedRef:H.a.oneOfType([H.a.func,H.a.object]),visible:H.a.bool,onClickAction:H.a.func},xe.defaultProps={closePopup:null,countryInfo:null,forwardedRef:null,visible:!1,onClickAction:null};var De=Object(F.forwardRef)((function(e,t){return V.a.createElement(xe,O()({forwardedRef:t},e))})),Ue=n(670);function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var o=M()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L()(this,n)}}var qe=Object(i.c)("ul",{target:"e1st77eh0"})("list-style-type:none;margin-top:0;padding:0;"),Le=Object(i.c)(ge.a,{target:"e1st77eh1"})("padding-bottom:4px;"),Ne=function(e){A()(n,e);var t=Ae(n);function n(){var e;_()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),o()(D()(e),"state",{hoveredCountry:null}),e}return I()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onUnblock,r=t.blockedCountries,o=this.state.hoveredCountry;return V.a.createElement(qe,null,r.length>0?r.map((function(t){return V.a.createElement("li",{key:t},V.a.createElement(Le,{justifyContent:"space-between",onMouseEnter:function(){return e.setState({hoveredCountry:t})},onMouseLeave:function(){return e.setState({hoveredCountry:null})}},V.a.createElement(ge.a,{alignItems:"center"},V.a.createElement(ye.a,{countryCode:t,margin:"0 8px 0 0"}),V.a.createElement(ve.a,null,V.a.createElement(W.c,{id:t?"COUNTRY_".concat(t.toUpperCase()):"IPS_COUNTRY_UNKNOWN"}))),o===t&&V.a.createElement(Ce.a,null,V.a.createElement(ke.c,{name:"geoip-unblock-country",variant:"link",size:"small",onClick:function(){return n(t)}},V.a.createElement(W.c,{id:"IPS_UNBLOCK_COUNTRY_LABEL"})))))})):V.a.createElement(ve.a,null,V.a.createElement(W.c,{id:"IPS_NO_BLOCKED_COUNTRIES_DESCRIPTION"})))}}]),n}(F.Component);o()(Ne,"propTypes",{onUnblock:H.a.func.isRequired,blockedCountries:H.a.arrayOf(H.a.string)}),o()(Ne,"defaultProps",{blockedCountries:[]});var Me=Object(i.c)("div",{target:"e1w8hyjt0"})("position:absolute;top:30px;left:30px;z-index:1;"),Te=Object(i.c)("div",{target:"e1w8hyjt1"})("background:",(function(e){return"dark"===e.motif?"rgba(0, 0, 0, .75)":"rgba(255, 255, 255, .75)"}),";padding:10px 16px;width:260px;pointer-events:auto;font-family:Lato,sans-serif;border-radius:3px;"),Be=Object(i.c)(J.a,{target:"e1w8hyjt2"})("margin:8px 0 16px 0;");function Fe(e){var t=e.blockedCountries,n=e.forwardedRef,r=e.onUnblock,o=Object(F.useContext)(Ue.a).motif;return V.a.createElement(Me,{innerRef:n},V.a.createElement(Te,{motif:o},V.a.createElement(Be,{weight:"bold"},V.a.createElement(W.c,{id:"IPS_BLOCKED_COUNTRIES_LABEL"})),V.a.createElement(Ne,{blockedCountries:t,onUnblock:r})))}Fe.propTypes={blockedCountries:H.a.arrayOf(H.a.string).isRequired,onUnblock:H.a.func.isRequired};var Ve=V.a.forwardRef((function(e,t){return V.a.createElement(Fe,O()({},e,{forwardedRef:t}))}));function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var o=M()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L()(this,n)}}var ze=Object(i.c)("div",{target:"e1liwmuc0"})("transform:",(function(e){return"translateY(".concat(e.mapReady?"0px":"".concat(-me.d,"px"),")")}),";opacity:",(function(e){return e.mapReady?1:0}),";width:100%;display:flex;transition:opacity 250ms cubic-bezier(0.59,-0.05,0.68,0.19);"),Ye=function(e,t){return{width:e,height:t,latitude:38.482676064496935,longitude:-87.71105342395963,pitch:0,bearing:0,zoom:1}};function We(e,t){return{id:e,source:t,sourceLayer:me.g.POLYGON_SOURCE_LAYER}}var Je=function(e,t){return function(n,r,a){r&&e.forEach((function(e){var i=We(r,e);n.setFeatureState(i,o()({},t,a))}))}},Qe=Je([me.i.clickFills,me.i.clickOutlines],"clicked"),Xe=Je([me.i.blockFills,me.i.blockOutlines],"blocked"),Ze=function(e){A()(n,e);var t=Ke(n);function n(e){var r;return _()(this,n),r=t.call(this,e),o()(D()(r),"popup",V.a.createRef()),o()(D()(r),"mapGlRef",V.a.createRef()),o()(D()(r),"deckRef",V.a.createRef()),o()(D()(r),"getMap",(function(){return r.mapGlRef.current.getMap()})),o()(D()(r),"getCursor",(function(){return r.state.hoveredCountryId?"pointer":"grab"})),o()(D()(r),"animate",(function(){var e=.001,t=setInterval((function(){(e+=.005)>=1&&clearInterval(t),r.setState({coef:e})}),5)})),o()(D()(r),"onArcHovered",(function(){})),o()(D()(r),"onMapLoad",(function(){var e=r.getMap(),t=r.props.mapLoaded;r.addCustomLayers(),e.once("idle",(function(){r.renderBlockedCountries(),t(),window.requestIdleCallback?requestIdleCallback(r.animate):r.animate()}))})),o()(D()(r),"addCustomLayers",(function(){if(!r.props.geoIpDisabled){var e=r.getMap(),t=e.getStyle().layers,n=Object(se.a)(t.filter((function(e){return"symbol"===e.type}))[0],"id",void 0);Object.entries(me.f).forEach((function(t){var n=ne()(t,2),r=n[0],o=n[1];return e.addSource(r,o)})),me.e.forEach((function(t){return e.addLayer(t,n)}))}})),o()(D()(r),"onMouseMove",(function(e){var t=e.x,n=e.y,o=r.state.hoveredCountryId;if(!r.props.geoIpDisabled&&t&&n&&r.map){var a=r.map.queryRenderedFeatures([t,n],{layers:[me.i.clickFills]}),i=ne()(a,1)[0],c=i&&i.id;c&&c!==o?(Qe(r.map,c,!0),Qe(r.map,o,!1),r.setState({hoveredCountryId:c})):!c&&o&&(Qe(r.map,o,!1),r.setState({hoveredCountryId:null}))}})),o()(D()(r),"onChangeCountryState",(function(e,t){return Xe(r.getMap(),e,t)})),o()(D()(r),"onUnblockCountry",(function(e){(0,r.props.onUnblockCountries)(e),r.changeCountriesStateOnMap([e],!1)})),o()(D()(r),"onUnblockAllCountries",(function(){var e=r.props,t=e.onUnblockCountries,n=e.blockedCountries;r.changeCountriesStateOnMap(n,!1),t(n)})),o()(D()(r),"changeCountriesStateOnMap",(function(e,t){r.getMap().queryRenderedFeatures(void 0,{layers:[me.i.blockFills]}).filter((function(t){return e.includes(t.properties.ISO_A2)})).forEach((function(e){return r.onChangeCountryState(e.id,t)}))})),o()(D()(r),"closePopup",(function(){var e=r.state.clickedCountryId;e&&(Qe(r.map,e,!1),r.setState({selectedCountry:null,clickedCountryId:null}),r.mbPopup.remove())})),o()(D()(r),"onViewStateChange",(function(e){var t=e.viewState;r.setState({viewState:t})})),o()(D()(r),"popupAction",(function(){var e=r.props,t=e.onBlockCountry,n=e.onUnblockCountries,o=r.state.selectedCountry,a=o.blocked,i=o.code,c=o.featureId;r.onChangeCountryState(c,!a),a?(n([i]),r.removeClickedCountry(),r.mbPopup.remove()):(t(i),r.closePopup())})),o()(D()(r),"removeClickedCountry",(function(){var e=r.state.clickedCountryId;Qe(r.map,e,!1),r.setState({clickedCountryId:null})})),o()(D()(r),"clickHandler",(function(e){if(!r.props.geoIpDisabled){r.closePopup();var t=r.map.queryRenderedFeatures([e.x,e.y],{layers:[me.i.clickFills]});if(t&&t.length){var n=t[0].id,o=r.state.clickedCountryId;o&&o===n||Qe(r.map,n,!0),o!==n&&Qe(r.map,o,!1),r.setState({clickedCountryId:n})}else r.removeClickedCountry();var a=r.map.queryRenderedFeatures([e.x,e.y],{layers:[me.i.blockFills]});if(a.length>0){var i=a[0].properties.NAME,c=function(e,t){return me.h[t]?me.h[t]:e[0].properties.ISO_A2}(a,i),s=a[0].id;if(me.b.find((function(e){return e.countryCode===c}))){var u=We(s,me.i.blockFills),l=r.map.getFeatureState(u),p=l&&l.blocked;r.setState({selectedCountry:{featureId:s,name:i,code:c,blocked:p}}),r.mbPopup=new ce.a.Popup({anchor:"bottom",closeButton:!1}).setLngLat(e.lngLat).setDOMContent(r.popup.current),r.mbPopup.addTo(r.map)}}}})),o()(D()(r),"renderBlockedCountries",(function(){if(!r.props.geoIpDisabled){var e=r.props.blockedCountries;r.changeCountriesStateOnMap(e,!0)}})),r.state={clickedCountryId:null,selectedCountry:null,hoveredCountryId:null,coef:.001,hasInitialViewState:!1},r}return I()(n,[{key:"componentDidUpdate",value:function(){!this.map&&this.mapGlRef.current&&(this.map=this.mapGlRef.current.getMap())}},{key:"componentWillUnmount",value:function(){(0,this.props.mapLoaded)(!1)}},{key:"render",value:function(){var e=this.props,t=e.apiKey,n=e.blockedCountries,r=e.geoIpDisabled,o=e.ipsEventArcData,a=e.values,i=e.mapboxStyleUrl,c=e.width,s=e.height,u=e.isMapLoaded,l=e.isUdm,p=this.state,f=p.selectedCountry,d=p.coef,b=p.viewState,m=o.arcs,g=o.arcCounts,v=Math.max.apply(Math,E()(Object.values(g))),y=new be({id:"arc-layer",data:m,widthScale:1,getTargetColor:function(e){return e.targetColor},getSourceColor:function(e){return e.sourceColor},autoHighlight:!0,highlightColor:[255,255,255,255],pickable:!0,onHover:this.onArcHovered,coef:d,getTilt:function(e){var t=g[e.arcLabel];return t/v*70*(e.index/t-.5)},getHeight:.5});return V.a.createElement(V.a.Fragment,null,V.a.createElement(ze,{mapReady:u},!r&&V.a.createElement(V.a.Fragment,null,V.a.createElement(De,{isUdm:l,values:a,countryInfo:f,onClickAction:this.popupAction,ref:this.popup,visible:!!f,closePopup:this.closePopup}),V.a.createElement(Ve,{blockedCountries:n,maxHeight:s,onUnblock:this.onUnblockCountry,onUnblockAll:this.onUnblockAllCountries})),V.a.createElement(re.a,{controller:!0,onClick:this.clickHandler,viewState:b||Ye(c,s),onHover:this.onMouseMove,getCursor:this.getCursor,onViewStateChange:this.onViewStateChange,layers:[y],ref:this.deckRef},V.a.createElement(oe.a,{onLoad:this.onMapLoad,viewState:b||Ye(c,s),ref:this.mapGlRef,attributionControl:!1,mapboxApiAccessToken:t,mapStyle:i}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!t.hasInitialViewState&&e.ipsEventArcData.arcs.length){var n,r=e.ipsEventArcData.bounds,o=e.width,a=e.height,i=[r.slice(0,2),r.slice(2,4)];try{n=Object(ae.a)({width:o,height:a,bounds:i,padding:25})}catch(c){n=Ye()}return He(He({},t),{},{viewState:He(He({},n),{},{zoom:Math.min(n.zoom,2),pitch:50,bearing:22,mapReady:!1}),hasInitialViewState:!0})}return t}}]),n}(F.Component);Ze.defaultProps={apiKey:null},Ze.propTypes={height:H.a.number.isRequired,onBlockCountry:H.a.func.isRequired,onUnblockCountries:H.a.func.isRequired,values:H.a.object.isRequired,mapLoaded:H.a.func.isRequired,isMapLoaded:H.a.bool.isRequired,isUdm:H.a.bool.isRequired,width:H.a.number.isRequired,mapboxStyleUrl:H.a.string.isRequired,ipsEventArcData:H.a.shape({arcs:H.a.array,arcCounts:H.a.object,bounds:H.a.array}).isRequired,apiKey:H.a.string,blockedCountries:H.a.arrayOf(H.a.string),geoIpDisabled:H.a.bool},Ze.defaultProps={blockedCountries:[],geoIpDisabled:!1};var $e=["fetchUIData","ipsEventArcData","isHardwareOffloadAvailable","isIpsDisabled","isUdm","mapboxKey","usgSettings","values","visible","containerClassName"];function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M()(e);if(t){var o=M()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L()(this,n)}}var rt=Object(i.c)("div",{target:"e1wuif3m0"})("margin-bottom:24px;position:relative;height:",me.d,"px;display:flex;flex:1;min-height:",me.d,"px;width:100%;"),ot=Object(i.c)(ee,{target:"e1wuif3m1"})("align-items:center;background-color:",(function(e){return e.theme.themeName===Y.a.dark?"rgba(0, 0, 0, .75)":"rgba(255, 255, 255, .75)"}),";border-radius:7.5px;left:15px;padding:10px 15px;position:absolute;top:15px;z-index:1;"),at=Object(i.a)("display:none;"),it=Object(i.a)("margin-bottom:0 !important;"),ct=function(e){A()(n,e);var t=nt(n);function n(){var e;_()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),o()(D()(e),"state",{dimensions:null}),o()(D()(e),"container",V.a.createRef()),o()(D()(e),"mapRef",V.a.createRef()),o()(D()(e),"onUnblockCountries",function(){var t=S()(B.a.mark((function t(n){var r,o,a,i,c;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.values.blockedCountries,a=r.setFieldValue,i=r.submitForm,c=(o||[]).filter((function(e){return!n.includes(e)})),a("blockedCountries",c),t.next=5,Promise.resolve();case 5:i();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o()(D()(e),"onBlockCountry",function(){var t=S()(B.a.mark((function t(n){var r,o,a,i,c;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.values.blockedCountries,a=r.setFieldValue,i=r.submitForm,c=(o||[]).includes(n)?o:[].concat(E()(o||[]),[n]),a("blockedCountries",c),t.next=5,Promise.resolve();case 5:i();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o()(D()(e),"updateDimensions",(function(){var t=e.container.current.getBoundingClientRect();e.setState({dimensions:[t.width,t.height]})})),e}return I()(n,[{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.formValues,r=t.resetForm,o=t.status;!e.status.isSubmitted&&o.isSubmitted&&r({values:tt({},n)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"render",value:function(){var e,t=this.state.dimensions,n=this.props,r=n.fetchUIData,a=n.ipsEventArcData,i=n.isHardwareOffloadAvailable,c=n.isIpsDisabled,s=n.isUdm,u=n.mapboxKey,l=n.usgSettings,p=n.values,f=n.visible,d=n.containerClassName,b=k()(n,$e);return V.a.createElement(rt,{innerRef:this.container,className:z()((e={},o()(e,at,!f),o()(e,it,c),e),d)},!s&&!i&&l&&l.geo_ip_filtering_enabled&&V.a.createElement(ot,{message:"IPS_GEOIP_FILTERING_WARNING_HARDWARE_OFFLOAD_DISABLED"}),t&&V.a.createElement(Ze,O()({apiKey:u,geoIpDisabled:!s&&!i,fetchUIData:r,isUdm:s,values:p,ipsEventArcData:a,blockedCountries:p.blockedCountries,onBlockCountry:this.onBlockCountry,onUnblockCountries:this.onUnblockCountries,width:t[0],height:me.d,ref:this.mapRef},b)))}}]),n}(F.PureComponent);function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geo_ip_filtering_countries;return t?t.split(","):[]}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}o()(ct,"propTypes",{fetchUIData:H.a.func.isRequired,formValues:H.a.object.isRequired,handleReset:H.a.func.isRequired,ipsEventArcData:H.a.object.isRequired,isHardwareOffloadAvailable:H.a.bool.isRequired,isIpsDisabled:H.a.bool.isRequired,isUdm:H.a.bool.isRequired,mapboxKey:H.a.string.isRequired,resetForm:H.a.func.isRequired,setFieldValue:H.a.func.isRequired,status:H.a.object.isRequired,submitForm:H.a.func.isRequired,usgSettings:H.a.object.isRequired,values:H.a.object.isRequired,visible:H.a.bool.isRequired,containerClassName:H.a.string}),o()(ct,"defaultProps",{containerClassName:void 0});var pt=Object(i.c)("div",{target:"e6wq7xm0"})("height:",me.d,"px;min-height:",me.d,"px;"),ft=Object(s.g)({mapPropsToStatus:function(){return{isSubmitted:!1}},mapPropsToValues:function(e){return lt({},e.formValues)},handleSubmit:Object(g.a)((function(e,t){return(0,t.saveSettings)(lt(lt({},t.usgSettings),{},{geo_ip_filtering_countries:(e.blockedCountries||[]).join(","),geo_ip_filtering_block:e.geo_ip_filtering_block,geo_ip_filtering_enabled:e.geo_ip_filtering_enabled||(e.blockedCountries||[]).length>0,geo_ip_filtering_traffic_direction:e.geo_ip_filtering_traffic_direction}))}),{successMessage:"IPS_GEOIP_FILTERING_SAVE_SUCCESS",failureMessage:"IPS_GEOIP_FILTERING_SAVE_ERROR"})}),dt={createToast:b.c,fetchUIData:d.a,mapLoaded:v.f,saveSettings:p.saveSettings};t.default=Object(a.compose)(Object(c.connect)((function(e){return{mapboxKey:Object(d.c)(e),mapboxStyleUrl:Object(y.h)(e),ipsEventArcData:Object(y.f)(e),isHardwareOffloadAvailable:Object(u.a)(e),isIpsDisabled:Object(p.selectIsIpsDisabled)(e),isMapLoaded:Object(y.g)(e),isUdm:Object(f.m)(e),usgSettings:Object(p.selectUsgSettings)(e)}}),dt,(function(e,t,n){return lt(lt(lt(lt({},e),t),n),{},{formValues:{blockedCountries:st(e.usgSettings),geo_ip_filtering_block:e.usgSettings.geo_ip_filtering_block||me.a.BLOCK,geo_ip_filtering_enabled:e.usgSettings.geo_ip_filtering_enabled||!1,geo_ip_filtering_traffic_direction:e.usgSettings.geo_ip_filtering_traffic_direction||l.q.BOTH}})})),Object(m.c)((function(e){return(0,e.fetchUIData)()}),pt),ft)(ct)}}]);
//# sourceMappingURL=ips-map.f400b1db6c26e1693504.js.map